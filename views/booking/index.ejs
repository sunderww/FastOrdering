<body class="dashboard-page sb-l-o sb-r-c">

    <!-- Start: Main -->
    <div id="main">

        <% include ../header.ejs %>
        <% include ../sidebar.ejs %>

        <!-- Start: Content-Wrapper -->
        <section id="content_wrapper">



            <!-- Start: Topbar -->
            <header id="topbar">
                <div class="topbar-left">
                    <ol class="breadcrumb">
                        <li class="crumb-active">
                            <a href="">Réservation</a>
                        </li>
                        <li class="crumb-icon">
                            <a href="dashboard">
                                <span class="glyphicon glyphicon-home"></span>
                            </a>
                        </li>
                        <li class="crumb-link">
                            <a href="dashboard">Accueil</a>
                        </li>
                        <li class="crumb-trail">Gérer les réservation</li>
                    </ol>
                </div>

            </header>
            <!-- End: Topbar -->



            <!-- Begin: Content -->
            <section id="content" class="animated fadeIn">
                <!-- Dashboard Tiles -->
                <div class="col-md-12">
                    <div class="panel">
                        <div class="panel-heading">
                            <span class="panel-title">Réservation :</span>
                        </div>
                        <div class="panel-menu">
                            <a href="/booking/new" class="btn btn-sm btn-success">Nouvelle réservation</a>
                        </div>
                        <div class="panel-body">
                            <div id='calendar'></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- End: Main -->

            <!-- BEGIN: PAGE SCRIPTS -->

            <!-- jQuery -->
            <script type="text/javascript" src="../vendor/jquery/jquery-1.11.1.min.js"></script>
            <script type="text/javascript" src="../vendor/jquery/jquery_ui/jquery-ui.min.js"></script>
            <script type="text/javascript" src="../vendor/plugins/magnific/jquery.magnific-popup.js"></script>

            <!-- Bootstrap -->
            <script type="text/javascript" src="../assets/js/bootstrap/bootstrap.min.js"></script>

            <!-- Theme Javascript -->
            <script type="text/javascript" src="../assets/js/utility/utility.js"></script>
            <script type="text/javascript" src="../assets/js/main.js"></script>
            <script type="text/javascript" src="../assets/js/demo.js"></script>


            <script type="text/javascript" src="../vendor/jquery/jquery-1.11.1.min.js"></script>
            <script type="text/javascript" src="../vendor/jquery/jquery_ui/jquery-ui.min.js"></script>

            <!-- Bootstrap -->
            <script type="text/javascript" src="../assets/js/bootstrap/bootstrap.min.js"></script>

            <!-- Page Plugins -->
            <script type="text/javascript" src="../vendor/plugins/magnific/jquery.magnific-popup.js"></script>

            <!-- Admin Forms Javascript -->
            <script type="text/javascript" src="../assets/admin-tools/admin-forms/js/jquery-ui-monthpicker.min.js"></script>
            <script type="text/javascript" src="../assets/admin-tools/admin-forms/js/jquery-ui-timepicker.min.js"></script>
            <script type="text/javascript" src="../assets/admin-tools/admin-forms/js/jquery-ui-touch-punch.min.js"></script>
            <script type="text/javascript" src="../assets/admin-tools/admin-forms/js/jquery.spectrum.min.js"></script>
            <script type="text/javascript" src="../assets/admin-tools/admin-forms/js/jquery.stepper.min.js"></script>

            <!-- Theme Javascript -->
            <script type="text/javascript" src="../assets/js/utility/utility.js"></script>
            <script type="text/javascript" src="../assets/js/main.js"></script>
            <script type="text/javascript" src="../assets/js/demo.js"></script>

            <!-- Full calendear -->
            <link rel='stylesheet' href='/fullcalendar/fullcalendar.css' />
            <script type="text/javascript" src='/fullcalendar/lib/moment.min.js'></script>
            <script type="text/javascript" src='/fullcalendar/fullcalendar.min.js'></script>
            <script type="text/javascript" src='/fullcalendar/lang-all.js'></script>
            <script type="text/javascript">
                jQuery(document).ready(function() {

                // page is now ready, initialize the calendar...

                    $('#calendar').fullCalendar({
                        header: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'month,agendaWeek,agendaDay'
                        },
                        selectable: true,
                        editable: false,
                        eventLimit: true,
                        lang: 'fr',
                        events: [
                        <% _.each(bookings, function(booking) { %>
                        {
                            id: '<%= booking.id %>',
                            title: '<%= booking.name %> : <%= booking.nb_persons %>',
                            start: '<%= booking.date %>'
                        },
                        <% }) %>
                        ],
                        dayClick: function(date) {
                            $('#calendar').fullCalendar('gotoDate', date);
                            $('#calendar').fullCalendar('changeView', 'agendaDay');
                        },
                        eventClick: function(calEvent) {
                            window.location="/booking/edit/" + calEvent.id;
                        }
                    // put your options and callbacks here
                    })

                });
            </script>
